<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
<link
  rel="stylesheet"
  href="https://bootswatch.com/4/journal/bootstrap.min.css"
/>

<style>
    img {
        display: inline;
        margin: 0 auto;
        height: 100%;
        width: auto;
    }

    h5{
        display: flex;
        justify-content: center;
        align-items: center;

        width: 300px;
        height: 300px;
        border-radius: 50%;

        font-weight: lighter;
        color: white;
        
        position: absolute;
        top: 0;
        left: 0;
        background: rgb(0 0 0 / 50%);
    }

    h5:hover{
        cursor: pointer;
    }

    .container{
        padding: 0;
        position: relative;
    }

    .form-group{
        display: flex;
        justify-content: center;
    }

    .img-cropper {
        width: 300px;
        height: 300px;
        position: relative;
        overflow: hidden;
        border-radius: 50%;
    }

</style>

<div class="row mt-5">
    <div class="col-md-6 m-auto">
        <div class="card card-body">
            <h2 class="text-center mb-3">
                Add Profile Picture
            </h2>
            <form action="/users/updateProfilePic" method="POST" enctype="multipart/form-data">
                <div style="margin-bottom: 0;" class="form-group">
                    <label for="profilePic">
                        <div class="img-cropper" onmouseenter="showText(this)" onmouseleave="hideText(this)">
                            <img id="output" src="<%=user.profilePicURL%>" alt="">
                            <h5>Click to select photo</h5>
                        </div>
                    </label>
                    <input type="file" id="profilePic" name="profilePic" class="form-control" onchange="loadFile(event)" hidden/>
                </div>
                <div style="display: flex; flex-direction: column;align-items: center;">
                    <button style="display: none;" type="submit" class="btn">
                        <img style="width: 40px; margin-bottom: 20px;" src="/check.png" alt="">
                    </button>
                    <a href="/dashboard">Skip>></a>
                </div>
            </form>
        </div>
    </div>
</div>

<script>

    flag = 0;

    var loadFile = function(event) {
        flag = 1;
        var reader = new FileReader();
        reader.onload = function(){
            var output = document.getElementById('output');
            output.src = reader.result;
        };
        reader.readAsDataURL(event.target.files[0]);
        document.getElementsByTagName('h5')[0].style.display = 'none';
        document.getElementsByTagName('button')[0].style.display = 'inline';
    };

    function showText(x)
    {
        x.getElementsByTagName('h5')[0].style.display = 'flex';
    } 
    function hideText(x)
    {
        if(flag)
            x.getElementsByTagName('h5')[0].style.display = 'none';
    }    
</script>

<script
src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
crossorigin="anonymous"
></script>
<script
src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
crossorigin="anonymous"
></script>
<script
src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
crossorigin="anonymous"
></script>